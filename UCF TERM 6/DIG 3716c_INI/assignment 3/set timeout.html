<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>05 SET TIMEOUT</title>
		<style type="text/css">
			p {
				font-size: 30px;
				padding-left: 20px;
			}
		</style>
        <script type="text/javascript">
			function changeColor() {
				var r, g, b;
				var display = document.getElementById("display");
				var random_red = Math.ceil(255 * Math.random());
				var random_green = Math.ceil(255 * Math.random());
				var random_blue = Math.ceil(255 * Math.random());
				display.style.color = "rgb(" + random_red + "," + random_green + "," + random_blue + ")";
				setTimeout(changeColor, 2000);
			}
			function prepareTimers(event) {
				setTimeout(changeColor, 2000);
				event.preventDefault();
			}
			function prepareEvents() {
				var anchors = document.getElementsByTagName('a');
				anchors[0].addEventListener('click',prepareTimers,false);
			}
			window.onload = function() {
				prepareEvents();
			}
		</script>
    </head>

    <body>
        <p id="display">This color should change after 2000 milliseconds (2 seconds) when you click the link below!</p>
		<p><a href="http://www.google.com">Click to change color!</a></p>
    </body>
</html>